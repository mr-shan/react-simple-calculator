<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.png" />
    <meta
      name="viewport"
      content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width, height=device-height"
    />
    <meta name="HandleFriendly" content="true" />
    <meta name="theme-color" content="#000000" />
    <title>Simple Calculator</title>
    <script>
      window.themes = {
        'dark': '#101010',
        'light': '#eee'
      }

      window.setTheme = function(theme) {
        localStorage.setItem('theme', theme)
        document.documentElement.setAttribute('data-theme', theme);
        document
        .querySelector('meta[name="theme-color"]')
        .setAttribute('content', window.themes[theme]);
      }

      window.setAutoTheme = function() {
        const darkThemeMq = window.matchMedia('(prefers-color-scheme: dark)');
        if (darkThemeMq.matches) {
          localStorage.setItem('theme', 'dark')
          window.setTheme('dark');
        } else {
          localStorage.setItem('theme', 'light')
          window.setTheme('light');
        }
      }

      const preferredTheme = localStorage.getItem('preferredTheme');

      if (!preferredTheme || preferredTheme === 'auto') {
        localStorage.setItem('preferredTheme', 'auto');
        window.setAutoTheme();
      } else {
        window.setTheme(preferredTheme)
      }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
